{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h1 class="text-center text-primary mb-4">Current Atlanta Braves 40-Man Roster</h1>
    <button type="button" class="btn btn-success mb-3 shadow-sm" data-bs-toggle="modal" data-bs-target="#addPlayerModal">
        <i class="bi bi-plus-lg"></i> Add New Player
    </button>

    <!-- Table displaying all players -->
    <div class="table-responsive">
        <table class="table table-striped table-hover align-middle shadow-sm">
            <thead class="bg-primary text-white">
                <tr>
                    <th>Uniform #</th>
                    <th>Name</th>
                    <th>Country</th>
                    <th>Active</th>
                    <th>Age</th>
                    <th>Batting</th>
                    <th>Throwing</th>
                    <th>Height</th>
                    <th>Weight</th>
                    <th>Date of Birth</th>
                    <th>First Year</th>
                    <th>Position</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for player in all_players %}
                <tr>
                    <td>{{ player.uniform_number }}</td>
                    <td>{{ player.player_name }}</td>
                    <td>{{ player.player_country }}</td>
                    <td>{{ player.player_active }}</td>
                    <td>{{ player.player_age }}</td>
                    <td>{{ player.player_hitting }}</td>
                    <td>{{ player.player_throwing }}</td>
                    <td>{{ player.player_height }}</td>
                    <td>{{ player.player_weight }}</td>
                    <td>{{ player.player_dob }}</td>
                    <td>{{ player.player_firstyear }}</td>
                    <td>{{ player.player_position }}</td>
                    <td>
                        <button type="button" class="btn btn-warning btn-sm shadow-sm" data-bs-toggle="modal" data-bs-target="#editPlayerModal{{ player.player_id }}">
                            Edit
                        </button>
                        <button type="button" class="btn btn-danger btn-sm shadow-sm" data-bs-toggle="modal" data-bs-target="#deletePlayerModal{{ player.player_id }}">
                            Delete
                        </button>
                    </td>
                </tr>

                <!-- Modals for Edit and Delete -->
                <!-- Edit Player Modal -->
                <div class="modal fade" id="editPlayerModal{{ player.player_id }}" tabindex="-1" aria-labelledby="editPlayerModalLabel{{ player.player_id }}" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content shadow-lg">
                            <div class="modal-header bg-warning text-white">
                                <h5 class="modal-title" id="editPlayerModalLabel{{ player.player_id }}">Edit Player</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <form method="post" action="{{ url_for('players.update_player', player_id=player.player_id) }}">
                                <div class="modal-body text-dark">
                                    <div class="mb-3">
                                        <label for="uniformNumber" class="form-label">Uniform Number</label>
                                        <input type="number" class="form-control" name="uniform_number" value="{{ player.uniform_number }}" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="playerName" class="form-label">Name</label>
                                        <input type="text" class="form-control" name="player_name" value="{{ player.player_name }}" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="playerCountry" class="form-label">Country</label>
                                        <input type="text" class="form-control" name="player_country" value="{{ player.player_country }}" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="playerActive" class="form-label">Active</label>
                                        <select class="form-select" name="player_active">
                                            <option value="Yes" {% if player.player_active == 'Yes' %}selected{% endif %}>Yes</option>
                                            <option value="No" {% if player.player_active == 'No' %}selected{% endif %}>No</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="playerAge" class="form-label">Age</label>
                                        <input type="number" class="form-control" name="player_age" value="{{ player.player_age }}" required>
                                    <div class="mb-3">
                                        <label for="playerHitting" class="form-label">Batting</label>
                                        <select class="form-select" name="player_hitting">
                                            <option value="Right" {% if player.player_hitting == 'Right' %}selected{% endif %}>Right</option>
                                            <option value="Left" {% if player.player_hitting == 'Left' %}selected{% endif %}>Left</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="playerThrowing" class="form-label">Throwing</label>
                                        <select class="form-select" name="player_throwing">
                                            <option value="Right" {% if player.player_throwing == 'Right' %}selected{% endif %}>Right</option>
                                            <option value="Left" {% if player.player_throwing == 'Left' %}selected{% endif %}>Left</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="playerHeight" class="form-label">Height</label>
                                        <input type="text" class="form-control" name="player_height" value="{{ player.player_height }}" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="playerWeight" class="form-label">Weight</label>
                                        <input type="text" class="form-control" name="player_weight" value="{{ player.player_weight }}" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="playerDob" class="form-label">Date of Birth</label>
                                        <input type="date" class="form-control" name="player_dob" value="{{ player.player_dob }}" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="playerFirstYear" class="form-label">First Year</label>
                                        <input type="number" class="form-control" name="player_firstyear" value="{{ player.player_firstyear }}" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="playerPosition" class="form-label">Position</label>
                                        <select class="form-select" name="player_position">
                                            <option value="P" {% if player.player_position == 'P' %}selected{% endif %}>P</option>
                                            <option value="SP" {% if player.player_position == 'SP' %}selected{% endif %}>SP</option>
                                            <option value="RP" {% if player.player_position == 'RP' %}selected{% endif %}>RP</option>
                                            <option value="C" {% if player.player_position == 'C' %}selected{% endif %}>C</option>
                                            <option value="1B" {% if player.player_position == '1B' %}selected{% endif %}>1B</option>
                                            <option value="2B" {% if player.player_position == '2B' %}selected{% endif %}>2B</option>
                                            <option value="3B" {% if player.player_position == '3B' %}selected{% endif %}>3B</option>
                                            <option value="SS" {% if player.player_position == 'SS' %}selected{% endif %}>SS</option>
                                            <option value="LF" {% if player.player_position == 'LF' %}selected{% endif %}>LF</option>
                                            <option value="CF" {% if player.player_position == 'CF' %}selected{% endif %}>CF</option>
                                            <option value="RF" {% if player.player_position == 'RF' %}selected{% endif %}>RF</option>
                                            <option value="DH" {% if player.player_position == 'DH' %}selected{% endif %}>DH</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                    <button type="submit" class="btn btn-warning">Save Changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Delete Player Modal -->
                <div class="modal fade" id="deletePlayerModal{{ player.player_id }}" tabindex="-1" aria-labelledby="deletePlayerModalLabel{{ player.player_id }}" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content shadow-lg">
                            <div class="modal-header bg-danger text-white">
                                <h5 class="modal-title" id="deletePlayerModalLabel{{ player.player_id }}">Delete Player</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-dark">
                                Are you sure you want to delete this player?
                            </div>
                            <div class="modal-footer">
                                <form method="post" action="{{ url_for('players.delete_player', player_id=player.player_id) }}">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                    <button type="submit" class="btn btn-danger">Delete</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Add Player Modal -->
<div class="modal fade" id="addPlayerModal" tabindex="-1" aria-labelledby="addPlayerModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content shadow-lg">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title" id="addPlayerModalLabel">Add New Player</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form method="post" action="{{ url_for('players.players_home') }}">
                <div class="modal-body text-dark">
                    <div class="mb-3">
                        <label for="uniformNumber" class="form-label">Uniform Number</label>
                        <input type="number" class="form-control" name="uniform_number" required>
                    </div>
                    <div class="mb-3">
                        <label for="playerName" class="form-label">Name</label>
                        <input type="text" class="form-control" name="player_name" required>
                    </div>
                    <div class="mb-3">
                        <label for="playerCountry" class="form-label">Country</label>
                        <input type="text" class="form-control" name="player_country" required>
                    </div>
                    <div class="mb-3">
                        <label for="playerActive" class="form-label">Active</label>
                        <select class="form-select" name="player_active">
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="playerAge" class="form-label">Age</label>
                        <input type="number" class="form-control" name="player_age" required>
                    </div>
                    <div class="mb-3">
                        <label for="playerHitting" class="form-label">Batting</label>
                        <select class="form-select" name="player_hitting">
                            <option value="Right">Right</option>
                            <option value="Left">Left</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="playerThrowing" class="form-label">Throwing</label>
                        <select class="form-select" name="player_throwing">
                            <option value="Right">Right</option>
                            <option value="Left">Left</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="playerHeight" class="form-label">Height</label>
                        <input type="text" class="form-control" name="player_height" required>
                    </div>
                    <div class="mb-3">
                        <label for="playerWeight" class="form-label">Weight</label>
                        <input type="text" class="form-control" name="player_weight" required>
                    </div>
                    <div class="mb-3">
                        <label for="playerDob" class="form-label">Date of Birth</label>
                        <input type="date" class="form-control" name="player_dob" required>
                    </div>
                    <div class="mb-3">
                        <label for="playerFirstYear" class="form-label">First Year</label>
                        <input type="number" class="form-control" name="player_firstyear" required>
                    </div>
                    <div class="mb-3">
                        <label for="playerPosition" class="form-label">Position</label>
                        <select class="form-select" name="player_position">
                            <option value="P">P</option>
                            <option value="SP">SP</option>
                            <option value="RP">RP</option>
                            <option value="C">C</option>
                            <option value="1B">1B</option>
                            <option value="2B">2B</option>
                            <option value="3B">3B</option>
                            <option value="SS">SS</option>
                            <option value="LF">LF</option>
                            <option value="CF">CF</option>
                            <option value="RF">RF</option>
                            <option value="DH">DH</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Add Player</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}










